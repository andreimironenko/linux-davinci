---
 drivers/base/core.c |    1 +
 1 file changed, 1 insertion(+)

--- gregkh-2.6.orig/drivers/base/core.c
+++ gregkh-2.6/drivers/base/core.c
@@ -340,6 +340,7 @@ struct device * get_device(struct device
  */
 void put_device(struct device * dev)
 {
+	might_sleep();
 	if (dev)
 		kobject_put(&dev->kobj);
 }
