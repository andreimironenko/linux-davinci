From foo@baz Tue Dec  6 15:35:16 2005
Date: Tue, 6 Dec 2005 15:33:15 -0800
From: Greg Kroah-Hartman <gregkh@suse.de>
Subject: drivers/sound/oss: Replace pci_module_init() with pci_register_driver()

Replace obsolete pci_module_init() with pci_register_driver().

Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
Cc: Richard Knutsson <ricknu-0@student.ltu.se>
---
 sound/oss/ad1889.c         |    2 +-
 sound/oss/btaudio.c        |    2 +-
 sound/oss/cmpci.c          |    2 +-
 sound/oss/cs4281/cs4281m.c |    2 +-
 sound/oss/cs46xx.c         |    2 +-
 sound/oss/emu10k1/main.c   |    2 +-
 sound/oss/es1370.c         |    2 +-
 sound/oss/es1371.c         |    2 +-
 sound/oss/ite8172.c        |    2 +-
 sound/oss/kahlua.c         |    2 +-
 sound/oss/maestro.c        |    2 +-
 sound/oss/nec_vrc5477.c    |    2 +-
 sound/oss/nm256_audio.c    |    2 +-
 sound/oss/rme96xx.c        |    2 +-
 sound/oss/sonicvibes.c     |    2 +-
 sound/oss/ymfpci.c         |    2 +-
 16 files changed, 16 insertions(+), 16 deletions(-)

--- gregkh-2.6.orig/sound/oss/ad1889.c
+++ gregkh-2.6/sound/oss/ad1889.c
@@ -1089,7 +1089,7 @@ static struct pci_driver ad1889_driver =
 
 static int __init ad1889_init_module(void)
 {
-	return pci_module_init(&ad1889_driver);
+	return pci_register_driver(&ad1889_driver);
 }
 
 static void ad1889_exit_module(void)
--- gregkh-2.6.orig/sound/oss/btaudio.c
+++ gregkh-2.6/sound/oss/btaudio.c
@@ -1101,7 +1101,7 @@ static int btaudio_init_module(void)
 	       digital ? "digital" : "",
 	       analog && digital ? "+" : "",
 	       analog ? "analog" : "");
-	return pci_module_init(&btaudio_pci_driver);
+	return pci_register_driver(&btaudio_pci_driver);
 }
 
 static void btaudio_cleanup_module(void)
--- gregkh-2.6.orig/sound/oss/cmpci.c
+++ gregkh-2.6/sound/oss/cmpci.c
@@ -3366,7 +3366,7 @@ static struct pci_driver cm_driver = {
 static int __init init_cmpci(void)
 {
 	printk(KERN_INFO "cmpci: version $Revision: 6.82 $ time " __TIME__ " " __DATE__ "\n");
-	return pci_module_init(&cm_driver);
+	return pci_register_driver(&cm_driver);
 }
 
 static void __exit cleanup_cmpci(void)
--- gregkh-2.6.orig/sound/oss/cs4281/cs4281m.c
+++ gregkh-2.6/sound/oss/cs4281/cs4281m.c
@@ -4477,7 +4477,7 @@ static int __init cs4281_init_module(voi
 	printk(KERN_INFO "cs4281: version v%d.%02d.%d time " __TIME__ " "
 	       __DATE__ "\n", CS4281_MAJOR_VERSION, CS4281_MINOR_VERSION,
 	       CS4281_ARCH);
-	rtn = pci_module_init(&cs4281_pci_driver);
+	rtn = pci_register_driver(&cs4281_pci_driver);
 
 	CS_DBGOUT(CS_INIT | CS_FUNCTION, 2,
 		  printk(KERN_INFO "cs4281: cs4281_init_module()- (%d)\n",rtn));
--- gregkh-2.6.orig/sound/oss/cs46xx.c
+++ gregkh-2.6/sound/oss/cs46xx.c
@@ -5711,7 +5711,7 @@ static int __init cs46xx_init_module(voi
 	int rtn = 0;
 	CS_DBGOUT(CS_INIT | CS_FUNCTION, 2, printk(KERN_INFO 
 		"cs46xx: cs46xx_init_module()+ \n"));
-	rtn = pci_module_init(&cs46xx_pci_driver);
+	rtn = pci_register_driver(&cs46xx_pci_driver);
 
 	if(rtn == -ENODEV)
 	{
--- gregkh-2.6.orig/sound/oss/emu10k1/main.c
+++ gregkh-2.6/sound/oss/emu10k1/main.c
@@ -1428,7 +1428,7 @@ static int __init emu10k1_init_module(vo
 {
 	printk(KERN_INFO "Creative EMU10K1 PCI Audio Driver, version " DRIVER_VERSION ", " __TIME__ " " __DATE__ "\n");
 
-	return pci_module_init(&emu10k1_pci_driver);
+	return pci_register_driver(&emu10k1_pci_driver);
 }
 
 static void __exit emu10k1_cleanup_module(void)
--- gregkh-2.6.orig/sound/oss/es1370.c
+++ gregkh-2.6/sound/oss/es1370.c
@@ -2779,7 +2779,7 @@ static struct pci_driver es1370_driver =
 static int __init init_es1370(void)
 {
 	printk(KERN_INFO "es1370: version v0.38 time " __TIME__ " " __DATE__ "\n");
-	return pci_module_init(&es1370_driver);
+	return pci_register_driver(&es1370_driver);
 }
 
 static void __exit cleanup_es1370(void)
--- gregkh-2.6.orig/sound/oss/es1371.c
+++ gregkh-2.6/sound/oss/es1371.c
@@ -3090,7 +3090,7 @@ static struct pci_driver es1371_driver =
 static int __init init_es1371(void)
 {
 	printk(KERN_INFO PFX "version v0.32 time " __TIME__ " " __DATE__ "\n");
-	return pci_module_init(&es1371_driver);
+	return pci_register_driver(&es1371_driver);
 }
 
 static void __exit cleanup_es1371(void)
--- gregkh-2.6.orig/sound/oss/ite8172.c
+++ gregkh-2.6/sound/oss/ite8172.c
@@ -2206,7 +2206,7 @@ static struct pci_driver it8172_driver =
 static int __init init_it8172(void)
 {
 	info("version v0.5 time " __TIME__ " " __DATE__);
-	return pci_module_init(&it8172_driver);
+	return pci_register_driver(&it8172_driver);
 }
 
 static void __exit cleanup_it8172(void)
--- gregkh-2.6.orig/sound/oss/kahlua.c
+++ gregkh-2.6/sound/oss/kahlua.c
@@ -218,7 +218,7 @@ static struct pci_driver kahlua_driver =
 static int __init kahlua_init_module(void)
 {
 	printk(KERN_INFO "Cyrix Kahlua VSA1 XpressAudio support (c) Copyright 2003 Red Hat Inc\n");
-	return pci_module_init(&kahlua_driver);
+	return pci_register_driver(&kahlua_driver);
 }
 
 static void __devexit kahlua_cleanup_module(void)
--- gregkh-2.6.orig/sound/oss/maestro.c
+++ gregkh-2.6/sound/oss/maestro.c
@@ -3634,7 +3634,7 @@ static int __init init_maestro(void)
 {
 	int rc;
 
-	rc = pci_module_init(&maestro_pci_driver);
+	rc = pci_register_driver(&maestro_pci_driver);
 	if (rc < 0)
 		return rc;
 
--- gregkh-2.6.orig/sound/oss/nec_vrc5477.c
+++ gregkh-2.6/sound/oss/nec_vrc5477.c
@@ -2045,7 +2045,7 @@ static struct pci_driver vrc5477_ac97_dr
 static int __init init_vrc5477_ac97(void)
 {
 	printk("Vrc5477 AC97 driver: version v0.2 time " __TIME__ " " __DATE__ " by Jun Sun\n");
-	return pci_module_init(&vrc5477_ac97_driver);
+	return pci_register_driver(&vrc5477_ac97_driver);
 }
 
 static void __exit cleanup_vrc5477_ac97(void)
--- gregkh-2.6.orig/sound/oss/nm256_audio.c
+++ gregkh-2.6/sound/oss/nm256_audio.c
@@ -1690,7 +1690,7 @@ module_param(force_load, bool, 0);
 static int __init do_init_nm256(void)
 {
     printk (KERN_INFO "NeoMagic 256AV/256ZX audio driver, version 1.1p\n");
-    return pci_module_init(&nm256_pci_driver);
+    return pci_register_driver(&nm256_pci_driver);
 }
 
 static void __exit cleanup_nm256 (void)
--- gregkh-2.6.orig/sound/oss/rme96xx.c
+++ gregkh-2.6/sound/oss/rme96xx.c
@@ -1095,7 +1095,7 @@ static int __init init_rme96xx(void)
 	devices = ((devices-1) & RME96xx_MASK_DEVS) + 1;
 	printk(KERN_INFO RME_MESS" reserving %d dsp device(s)\n",devices);
         numcards = 0;
-	return pci_module_init(&rme96xx_driver);
+	return pci_register_driver(&rme96xx_driver);
 }
 
 static void __exit cleanup_rme96xx(void)
--- gregkh-2.6.orig/sound/oss/sonicvibes.c
+++ gregkh-2.6/sound/oss/sonicvibes.c
@@ -2765,7 +2765,7 @@ static int __init init_sonicvibes(void)
 	if (!(wavetable_mem = __get_free_pages(GFP_KERNEL, 20-PAGE_SHIFT)))
 		printk(KERN_INFO "sv: cannot allocate 1MB of contiguous nonpageable memory for wavetable data\n");
 #endif
-	return pci_module_init(&sv_driver);
+	return pci_register_driver(&sv_driver);
 }
 
 static void __exit cleanup_sonicvibes(void)
--- gregkh-2.6.orig/sound/oss/ymfpci.c
+++ gregkh-2.6/sound/oss/ymfpci.c
@@ -2680,7 +2680,7 @@ static struct pci_driver ymfpci_driver =
 
 static int __init ymf_init_module(void)
 {
-	return pci_module_init(&ymfpci_driver);
+	return pci_register_driver(&ymfpci_driver);
 }
 
 static void __exit ymf_cleanup_module (void)
