From linux-kernel-owner+greg=40kroah.com-S1751408AbVK2X7Q@vger.kernel.org Tue Nov 29 16:05:28 2005
Date: Wed, 30 Nov 2005 00:59:14 +0100 (MET)
From: Richard Knutsson <ricknu-0@student.ltu.se>
Cc: Richard Knutsson <ricknu-0@student.ltu.se>
Message-Id: <20051130000425.1009.94647.sendpatchset@thinktank.campus.ltu.se>
Subject: [PATCH 1/6] arch: Replace pci_module_init() with pci_register_driver()

From: Richard Knutsson <ricknu-0@student.ltu.se>

Replace obsolete pci_module_init() with pci_register_driver().

Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 arch/i386/kernel/scx200.c         |    2 +-
 arch/mips/vr41xx/common/vrc4173.c |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

--- gregkh-2.6.orig/arch/i386/kernel/scx200.c
+++ gregkh-2.6/arch/i386/kernel/scx200.c
@@ -143,7 +143,7 @@ static int __init scx200_init(void)
 {
 	printk(KERN_INFO NAME ": NatSemi SCx200 Driver\n");
 
-	return pci_module_init(&scx200_pci_driver);
+	return pci_register_driver(&scx200_pci_driver);
 }
 
 static void __exit scx200_cleanup(void)
--- gregkh-2.6.orig/arch/mips/vr41xx/common/vrc4173.c
+++ gregkh-2.6/arch/mips/vr41xx/common/vrc4173.c
@@ -561,7 +561,7 @@ static int __devinit vrc4173_init(void)
 {
 	int err;
 
-	err = pci_module_init(&vrc4173_driver);
+	err = pci_register_driver(&vrc4173_driver);
 	if (err < 0)
 		return err;
 
