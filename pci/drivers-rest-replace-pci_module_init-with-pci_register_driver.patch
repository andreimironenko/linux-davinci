From linux-kernel-owner+greg=40kroah.com-S1751410AbVK3AAj@vger.kernel.org Tue Nov 29 16:05:28 2005
Date: Wed, 30 Nov 2005 01:00:35 +0100 (MET)
From: Richard Knutsson <ricknu-0@student.ltu.se>
Cc: Richard Knutsson <ricknu-0@student.ltu.se>
Message-Id: <20051130000545.1009.64699.sendpatchset@thinktank.campus.ltu.se>
Subject: [PATCH 5/6] drivers/*rest*: Replace pci_module_init() with pci_register_driver()

From: Richard Knutsson <ricknu-0@student.ltu.se>

Replace obsolete pci_module_init() with pci_register_driver().

Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/hwmon/vt8231.c           |    2 +-
 drivers/parport/parport_serial.c |    2 +-
 drivers/pcmcia/vrc4173_cardu.c   |    2 +-
 drivers/serial/serial_txx9.c     |    2 +-
 drivers/video/cyblafb.c          |    2 +-
 5 files changed, 5 insertions(+), 5 deletions(-)

--- gregkh-2.6.orig/drivers/serial/serial_txx9.c
+++ gregkh-2.6/drivers/serial/serial_txx9.c
@@ -1195,7 +1195,7 @@ static int __init serial_txx9_init(void)
 		serial_txx9_register_ports(&serial_txx9_reg);
 
 #ifdef ENABLE_SERIAL_TXX9_PCI
-		ret = pci_module_init(&serial_txx9_pci_driver);
+		ret = pci_register_driver(&serial_txx9_pci_driver);
 #endif
 	}
 	return ret;
--- gregkh-2.6.orig/drivers/video/cyblafb.c
+++ gregkh-2.6/drivers/video/cyblafb.c
@@ -1440,7 +1440,7 @@ static int __devinit cyblafb_init(void)
 		}
 #endif
 	output("CyblaFB version %s initializing\n",VERSION);
-	return pci_module_init(&cyblafb_pci_driver);
+	return pci_register_driver(&cyblafb_pci_driver);
 }
 
 static void __exit cyblafb_exit(void)
--- gregkh-2.6.orig/drivers/parport/parport_serial.c
+++ gregkh-2.6/drivers/parport/parport_serial.c
@@ -464,7 +464,7 @@ static struct pci_driver parport_serial_
 
 static int __init parport_serial_init (void)
 {
-	return pci_module_init (&parport_serial_pci_driver);
+	return pci_register_driver (&parport_serial_pci_driver);
 }
 
 static void __exit parport_serial_exit (void)
--- gregkh-2.6.orig/drivers/pcmcia/vrc4173_cardu.c
+++ gregkh-2.6/drivers/pcmcia/vrc4173_cardu.c
@@ -604,7 +604,7 @@ static int __devinit vrc4173_cardu_init(
 {
 	vrc4173_cardu_slots = 0;
 
-	return pci_module_init(&vrc4173_cardu_driver);
+	return pci_register_driver(&vrc4173_cardu_driver);
 }
 
 static void __devexit vrc4173_cardu_exit(void)
--- gregkh-2.6.orig/drivers/hwmon/vt8231.c
+++ gregkh-2.6/drivers/hwmon/vt8231.c
@@ -841,7 +841,7 @@ static int __devinit vt8231_pci_probe(st
 
 static int __init sm_vt8231_init(void)
 {
-	return pci_module_init(&vt8231_pci_driver);
+	return pci_register_driver(&vt8231_pci_driver);
 }
 
 static void __exit sm_vt8231_exit(void)
