From linux-kernel-owner+greg=40kroah.com-S1751412AbVK2X7h@vger.kernel.org Tue Nov 29 16:05:29 2005
Date: Wed, 30 Nov 2005 00:59:34 +0100 (MET)
From: Richard Knutsson <ricknu-0@student.ltu.se>
Cc: Richard Knutsson <ricknu-0@student.ltu.se>
Message-Id: <20051130000445.1009.27295.sendpatchset@thinktank.campus.ltu.se>
Subject: [PATCH 2/6] drivers/block: Replace pci_module_init() with pci_register_driver()

From: Richard Knutsson <ricknu-0@student.ltu.se>

Replace obsolete pci_module_init() with pci_register_driver().

Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/block/DAC960.c                     |    2 +-
 drivers/block/cciss.c                      |    2 +-
 drivers/block/sx8.c                        |    2 +-
 drivers/block/umem.c                       |    2 +-
 drivers/media/radio/radio-gemtek-pci.c     |    2 +-
 drivers/media/radio/radio-maxiradio.c      |    2 +-
 drivers/media/video/bttv-driver.c          |    2 +-
 drivers/media/video/saa7134/saa7134-core.c |    2 +-
 8 files changed, 8 insertions(+), 8 deletions(-)

--- gregkh-2.6.orig/drivers/block/cciss.c
+++ gregkh-2.6/drivers/block/cciss.c
@@ -3274,7 +3274,7 @@ static int __init cciss_init(void)
 	printk(KERN_INFO DRIVER_NAME "\n");
 
 	/* Register for our PCI devices */
-	return pci_module_init(&cciss_pci_driver);
+	return pci_register_driver(&cciss_pci_driver);
 }
 
 static void __exit cciss_cleanup(void)
--- gregkh-2.6.orig/drivers/block/DAC960.c
+++ gregkh-2.6/drivers/block/DAC960.c
@@ -7186,7 +7186,7 @@ static int DAC960_init_module(void)
 {
 	int ret;
 
-	ret =  pci_module_init(&DAC960_pci_driver);
+	ret =  pci_register_driver(&DAC960_pci_driver);
 #ifdef DAC960_GAM_MINOR
 	if (!ret)
 		DAC960_gam_init();
--- gregkh-2.6.orig/drivers/block/sx8.c
+++ gregkh-2.6/drivers/block/sx8.c
@@ -1774,7 +1774,7 @@ static void carm_remove_one (struct pci_
 
 static int __init carm_init(void)
 {
-	return pci_module_init(&carm_driver);
+	return pci_register_driver(&carm_driver);
 }
 
 static void __exit carm_exit(void)
--- gregkh-2.6.orig/drivers/block/umem.c
+++ gregkh-2.6/drivers/block/umem.c
@@ -1185,7 +1185,7 @@ static int __init mm_init(void)
 
 	printk(KERN_INFO DRIVER_VERSION " : " DRIVER_DESC "\n");
 
-	retval = pci_module_init(&mm_pci_driver);
+	retval = pci_register_driver(&mm_pci_driver);
 	if (retval)
 		return -ENOMEM;
 
--- gregkh-2.6.orig/drivers/media/radio/radio-gemtek-pci.c
+++ gregkh-2.6/drivers/media/radio/radio-gemtek-pci.c
@@ -394,7 +394,7 @@ static struct pci_driver gemtek_pci_driv
 
 static int __init gemtek_pci_init_module( void )
 {
-	return pci_module_init( &gemtek_pci_driver );
+	return pci_register_driver( &gemtek_pci_driver );
 }
 
 static void __exit gemtek_pci_cleanup_module( void )
--- gregkh-2.6.orig/drivers/media/radio/radio-maxiradio.c
+++ gregkh-2.6/drivers/media/radio/radio-maxiradio.c
@@ -337,7 +337,7 @@ static struct pci_driver maxiradio_drive
 
 static int __init maxiradio_radio_init(void)
 {
-	return pci_module_init(&maxiradio_driver);
+	return pci_register_driver(&maxiradio_driver);
 }
 
 static void __exit maxiradio_radio_exit(void)
--- gregkh-2.6.orig/drivers/media/video/bttv-driver.c
+++ gregkh-2.6/drivers/media/video/bttv-driver.c
@@ -4253,7 +4253,7 @@ static int bttv_init_module(void)
 	bttv_check_chipset();
 
 	bus_register(&bttv_sub_bus_type);
-	return pci_module_init(&bttv_pci_driver);
+	return pci_register_driver(&bttv_pci_driver);
 }
 
 static void bttv_cleanup_module(void)
--- gregkh-2.6.orig/drivers/media/video/saa7134/saa7134-core.c
+++ gregkh-2.6/drivers/media/video/saa7134/saa7134-core.c
@@ -1156,7 +1156,7 @@ static int saa7134_init(void)
 	printk(KERN_INFO "saa7130/34: snapshot date %04d-%02d-%02d\n",
 	       SNAPSHOT/10000, (SNAPSHOT/100)%100, SNAPSHOT%100);
 #endif
-	return pci_module_init(&saa7134_pci_driver);
+	return pci_register_driver(&saa7134_pci_driver);
 }
 
 static void saa7134_fini(void)
