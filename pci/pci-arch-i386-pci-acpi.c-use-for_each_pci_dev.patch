From akpm@osdl.org Sun Nov  6 23:40:15 2005
Message-Id: <200511070739.jA77diIo023296@shell0.pdx.osdl.net>
Subject: PCI: arch/i386/pci/acpi.c: use for_each_pci_dev
To: greg@kroah.com
Cc: akpm@osdl.org, hannal@us.ibm.com, adobriyan@gmail.com, domen@coderock.org,
   janitor@sternwelten.at
From: akpm@osdl.org
Date: Sun, 06 Nov 2005 23:39:36 -0800


From: Hanna Linder <hannal@us.ibm.com>

Signed-off-by: Hanna Linder <hannal@us.ibm.com>
Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
Signed-off-by: Domen Puncer <domen@coderock.org>
Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
Signed-off-by: Andrew Morton <akpm@osdl.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
---
 arch/i386/pci/acpi.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- gregkh-2.6.orig/arch/i386/pci/acpi.c
+++ gregkh-2.6/arch/i386/pci/acpi.c
@@ -70,7 +70,7 @@ static int __init pci_acpi_init(void)
 		 * don't use pci_enable_device().
 		 */
 		printk(KERN_INFO "PCI: Routing PCI interrupts for all devices because \"pci=routeirq\" specified\n");
-		while ((dev = pci_get_device(PCI_ANY_ID, PCI_ANY_ID, dev)) != NULL)
+		for_each_pci_dev(dev)
 			acpi_pci_irq_enable(dev);
 	} else
 		printk(KERN_INFO "PCI: If a device doesn't work, try \"pci=routeirq\".  If it helps, post a report\n");
