From khali@linux-fr.org Mon Aug 28 05:27:33 2006
Date: Mon, 28 Aug 2006 14:27:25 +0200
From: Jean Delvare <khali@linux-fr.org>
To: Greg KH <greg@kroah.com>
Cc: LM Sensors <lm-sensors@lm-sensors.org>
Subject: [PATCH 07/14] it87: in8 has no limit registers
Message-Id: <20060828142725.18716798.khali@linux-fr.org>
Content-Disposition: inline; filename=hwmon-it87-in8-no-limits.patch

it87: in8 has no limit registers

Signed-off-by: Jean Delvare <khali@linux-fr.org>

---
 drivers/hwmon/it87.c |    9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

--- gregkh-2.6.orig/drivers/hwmon/it87.c
+++ gregkh-2.6/drivers/hwmon/it87.c
@@ -220,8 +220,8 @@ struct it87_data {
 	unsigned long last_updated;	/* In jiffies */
 
 	u8 in[9];		/* Register value */
-	u8 in_max[9];		/* Register value */
-	u8 in_min[9];		/* Register value */
+	u8 in_max[8];		/* Register value */
+	u8 in_min[8];		/* Register value */
 	u8 has_fan;		/* Bitfield, fans enabled */
 	u16 fan[3];		/* Register values, possibly combined */
 	u16 fan_min[3];		/* Register values, possibly combined */
@@ -1250,12 +1250,9 @@ static struct it87_data *it87_update_dev
 			data->in_max[i] =
 			    it87_read_value(client, IT87_REG_VIN_MAX(i));
 		}
+		/* in8 (battery) has no limit registers */
 		data->in[8] =
 		    it87_read_value(client, IT87_REG_VIN(8));
-		/* Temperature sensor doesn't have limit registers, set
-		   to min and max value */
-		data->in_min[8] = 0;
-		data->in_max[8] = 255;
 
 		for (i = 0; i < 3; i++) {
 			/* Skip disabled fans */
