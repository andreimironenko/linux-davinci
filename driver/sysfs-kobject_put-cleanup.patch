From m.kozlowski@tuxland.pl Tue Jan  2 04:39:57 2007
From: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
To: gregkh@suse.de
Subject: sysfs: kobject_put cleanup
Date: Tue, 2 Jan 2007 13:41:10 +0100
Cc: linux-kernel@vger.kernel.org
Message-Id: <200701021341.11109.m.kozlowski@tuxland.pl>

This patch removes redundant argument checks for kobject_put().

Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>


---
 fs/sysfs/bin.c  |    5 ++---
 fs/sysfs/file.c |    5 ++---
 2 files changed, 4 insertions(+), 6 deletions(-)

--- gregkh-2.6.orig/fs/sysfs/bin.c
+++ gregkh-2.6/fs/sysfs/bin.c
@@ -147,7 +147,7 @@ static int open(struct inode * inode, st
  Error:
 	module_put(attr->attr.owner);
  Done:
-	if (error && kobj)
+	if (error)
 		kobject_put(kobj);
 	return error;
 }
@@ -158,8 +158,7 @@ static int release(struct inode * inode,
 	struct bin_attribute * attr = to_bin_attr(file->f_path.dentry);
 	u8 * buffer = file->private_data;
 
-	if (kobj) 
-		kobject_put(kobj);
+	kobject_put(kobj);
 	module_put(attr->attr.owner);
 	kfree(buffer);
 	return 0;
--- gregkh-2.6.orig/fs/sysfs/file.c
+++ gregkh-2.6/fs/sysfs/file.c
@@ -361,7 +361,7 @@ static int sysfs_open_file(struct inode 
 	error = -EACCES;
 	module_put(attr->owner);
  Done:
-	if (error && kobj)
+	if (error)
 		kobject_put(kobj);
 	return error;
 }
@@ -375,8 +375,7 @@ static int sysfs_release(struct inode * 
 
 	if (buffer)
 		remove_from_collection(buffer, inode);
-	if (kobj) 
-		kobject_put(kobj);
+	kobject_put(kobj);
 	/* After this point, attr should not be accessed. */
 	module_put(owner);
 
