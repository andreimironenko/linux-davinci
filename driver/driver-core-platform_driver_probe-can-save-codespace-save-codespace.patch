From akpm@osdl.org Mon Dec  4 14:57:54 2006
Message-Id: <200612042257.kB4Mvj2b007597@shell0.pdx.osdl.net>
Subject: Driver core: "platform_driver_probe() can save codespace": save codespace
To: greg@kroah.com
Cc: akpm@osdl.org, dbrownell@users.sourceforge.net, dtor@mail.ru
From: akpm@osdl.org
Date: Mon, 04 Dec 2006 14:56:36 -0800

From: Andrew Morton <akpm@osdl.org>

This function can be __init

Cc: David Brownell <dbrownell@users.sourceforge.net>
Cc: Dmitry Torokhov <dtor@mail.ru>
Signed-off-by: Andrew Morton <akpm@osdl.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>


---
 drivers/base/platform.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- gregkh-2.6.orig/drivers/base/platform.c
+++ gregkh-2.6/drivers/base/platform.c
@@ -473,7 +473,7 @@ EXPORT_SYMBOL_GPL(platform_driver_unregi
  * Returns zero if the driver registered and bound to a device, else returns
  * a negative error code and with the driver not registered.
  */
-int platform_driver_probe(struct platform_driver *drv,
+int __init_or_module platform_driver_probe(struct platform_driver *drv,
 		int (*probe)(struct platform_device *))
 {
 	int retval, code;
