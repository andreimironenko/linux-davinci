From m.kozlowski@tuxland.pl Thu Nov 16 07:58:20 2006
From: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
To: Luc Saillard <luc@saillard.org>, Greg KH <greg@kroah.com>
Subject: USB: pwc-if loop fix
Date: Thu, 16 Nov 2006 16:38:57 +0100
Message-Id: <200611161639.05830.m.kozlowski@tuxland.pl>

We should free urbs starting at [i-1] not [i].

Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>


---
 drivers/media/video/pwc/pwc-if.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

--- gregkh-2.6.orig/drivers/media/video/pwc/pwc-if.c
+++ gregkh-2.6/drivers/media/video/pwc/pwc-if.c
@@ -866,11 +866,10 @@ int pwc_isoc_init(struct pwc_device *pde
 	}
 	if (ret) {
 		/* De-allocate in reverse order */
-		while (i >= 0) {
+		while (i--) {
 			if (pdev->sbuf[i].urb != NULL)
 				usb_free_urb(pdev->sbuf[i].urb);
 			pdev->sbuf[i].urb = NULL;
-			i--;
 		}
 		return ret;
 	}
