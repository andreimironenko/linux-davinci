From stern@rowland.harvard.edu Tue Jan 30 07:34:18 2007
From: Alan Stern <stern@rowland.harvard.edu>
Date: Tue, 30 Jan 2007 10:34:15 -0500 (EST)
Subject: USB: Fix fallout from usbcore bandwidth removal
To: Greg KH <greg@kroah.com>
Message-ID: <Pine.LNX.4.44L0.0701301031090.3473-100000@iolanthe.rowland.org>


This patch (as845) cleans up some fallout from the removal of the
usbcore bandwidth machinery.

Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 sound/usb/usbaudio.c |   10 ----------
 1 file changed, 10 deletions(-)

--- gregkh-2.6.orig/sound/usb/usbaudio.c
+++ gregkh-2.6/sound/usb/usbaudio.c
@@ -325,16 +325,6 @@ static int prepare_capture_urb(struct sn
 	}
 	urb->transfer_buffer_length = offs;
 	urb->number_of_packets = ctx->packets;
-#if 0 // for check
-	if (! urb->bandwidth) {
-		int bustime;
-		bustime = usb_check_bandwidth(urb->dev, urb);
-		if (bustime < 0)
-			return bustime;
-		printk("urb %d: bandwidth = %d (packets = %d)\n", ctx->index, bustime, urb->number_of_packets);
-		usb_claim_bandwidth(urb->dev, urb, bustime, 1);
-	}
-#endif // for check
 	return 0;
 }
 
