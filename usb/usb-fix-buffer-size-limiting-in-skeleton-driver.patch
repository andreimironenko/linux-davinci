From ok@artecdesign.ee Thu Dec 22 02:49:16 2005
Date: Thu, 22 Dec 2005 12:44:52 +0200 (EET)
From: Olav Kongas <ok@artecdesign.ee>
To: Greg KH <greg@kroah.com>
cc: Oliver Neukum <oliver@neukum.org>
Subject: USB: fix buffer size limiting in skeleton driver
Message-ID: <Pine.LNX.4.63.0512221242160.15800@pcy.artec.ee>

Fix buffer size limiting.

Signed-off-by: Olav Kongas <ok@artecdesign.ee>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

---
 drivers/usb/usb-skeleton.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- gregkh-2.6.orig/drivers/usb/usb-skeleton.c
+++ gregkh-2.6/drivers/usb/usb-skeleton.c
@@ -166,7 +166,7 @@ static ssize_t skel_write(struct file *f
 	int retval = 0;
 	struct urb *urb = NULL;
 	char *buf = NULL;
-	size_t writesize = max(count, MAX_TRANSFER);
+	size_t writesize = min(count, MAX_TRANSFER);
 
 	dev = (struct usb_skel *)file->private_data;
 
